{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/img/ibiEnvMap.png","webpack:///./src/assets/img/9.png","webpack:///./src/assets/model/AO_maps/Door_03_AO.png","webpack:///./src/assets/model/AO_maps/Doors_02_AO.png","webpack:///./src/assets/model/AO_maps/Doors_01_AO.png","webpack:///./src/assets/model/AO_maps/DoorsTop_02_AO.png","webpack:///./src/assets/model/AO_maps/Susp_front_AO.png","webpack:///./src/assets/model/AO_maps/Susp_back_AO.png","webpack:///./src/assets/model/AO_maps/Seat_AO.png","webpack:///./src/assets/model/AO_maps/Roof_AO.png","webpack:///./src/assets/model/AO_maps/Rim_AO.png","webpack:///./src/assets/model/AO_maps/Dash_AO.png","webpack:///./src/assets/model/AO_maps/Chassis_Back_AO.png","webpack:///./src/assets/model/AO_maps/ChassieFront_AO.png","webpack:///./src/assets/model/AO_maps/Cab_Low_AO.png","webpack:///./src/assets/model/AO_maps/Cab_Back_AO.png","webpack:///./src/assets/model/AO_maps/front_ao.png","webpack:///./src/assets/model/AO_maps/Back_AO.png","webpack:///./src/assets/model/AO_maps/Tire_AO.png","webpack:///./src/assets/model/AO_maps/Accessories_AO.png","webpack:///./src/assets/model/GolfCart5.fbx","webpack:///./src/js/viewer/EnvironmentLoader.js","webpack:///./src/js/app/FirebaseWorker.js","webpack:///./src/assets/js/smtp.js","webpack:///./src/js/app/Sender.js","webpack:///./src/js/viewer/viewer.js","webpack:///./src/js/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","EnvironmentLoader","_classCallCheck","this","panoramTexture","group","THREE","Group","shader","ShaderMaterial","uniforms","map","type","placement","Vector3","rotation","vertexShader","geometry","SphereGeometry","default","config","projectId","messagingSenderId","firebase","initializeApp","_createClass","defineProperties","target","props","length","descriptor","writable","key","Constructor","protoProps","staticProps","FirebaseWorker","instance","TypeError","fbApp","authDomain","numbSavedImages","userData","imageList","storageBucket","fileName","console","log","firstName","lastName","company","jobTitle","stateRegion","city","callback","_this","userBaseData","saveToBase","then","imageData","parseInt","Math","random","child","imgBase64","snapshot","catch","fbStorageRef","error","getDownloadURL","imageUrl","orderCollectionRef","fbStore","add","email","Email","collection","createCORSRequest","send","e","t","a","sendEmail","emailData","encodeURIComponent","token","ajaxPost","url","floor","formData","FormData","append","orderId","setRequestHeader","onload","open","XDomainRequest","body","File","image","Date","_Sender","_FirebaseWorker2","_interopRequireDefault","_EnvironmentLoader2","_GolfCart2","_Tire_AO2","_Rim_AO2","_Seat_AO2","window","camera","scene","obj","Viewer","init","container","appendChild","getElementById","domElement","PerspectiveCamera","innerWidth","innerHeight","dropNumber","Scene","userForm","document","wrapFitFillToggle","preserveDrawingBuffer","position","setSize","size","setClearColor","rotate","Raycaster","initEvents","renderer","animate","addEventListener","isMouseDown","imgInput","onMouseup","mouse","Vector2","onMouseMove","event","params","mouseHelper","onMoveImg","BoxBufferGeometry","MeshNormalMaterial","visible","labelGroup","onWindowResize","bind","deleteLabelImage","click","onDropImg","onRangeInput","classList","remove","reset","style","display","phone","surfaseList","forEach","push","canvasTemp","ctxTemp","drawImage","watermarkImg","querySelector","toBlob","blob","firebaseWorker","label","isMarked","labelBtns","toDataURL","preActiveLabel","activeLabel","mode","isRemoveAll","width","height","material","_this2","sendData","needsUpdate","activeLabelMove","_this3","mapEmpty","showSection","cloneLabel","isCurrLabel","repeatData","computeTextureRepeat","preventDefault","filter","imgFiles","imgLoadList","readerLoadCounter","checked","imgLoadCounter","file","fileKey","FileReader","readAsDataURL","stopPropagation","targetMesh","Array","isArray","arr","arr2","from","dataTransfer","files","numbApplyingImg","readers","Blob","_this5","labelKey","setLabelTexture","imgSrc","result","shoot","createElement","canvas","getContext","clearRect","texture","ClampToEdgeWrapping","repeatCoef","repeat","offset","ctx","imgRatio","fill","stroke","minFilter","LinearFilter","wrapS","ratio","environment","y","loadModel","x","orbCntrlsChanged","offsetWidth","offsetHeight","clone","raycaster","setFromCamera","intersectsLabel","intersectObjects","intersectedLabelObject","al","uuid","center","layerX","model","boundingSphere","localToWorld","round","color","setRGB","el","shininess","offsetLeft","offsetTop","pos","FBXLoader","load","_this6","initLight","specular","aoMap","TextureLoader","set","envMapTexture","mapping","SphericalReflectionMapping","magFilter","NearestMipMapLinearFilter","_2","envMap","includes","cloneRoofAdMiddle","cloneRoofAd","rotateY","alphaMap","aspectRatio","Mesh","transparent","PI","scale","cloneNode","progress","currPosition","geometryDispose","mapDispose","mesh","orbitControls","maxPolarAngle","minDistance","maxDistance","setTimeout","ambientLight","directionalLight0","directionalLight1","OrbitControls","directionalLight2","pointLight1","PointLight","_this7","pointLight3","DirectionalLight","pointLightFR","pointLightFL","pointLightBR","pointLightBL","pointLight2","requestAnimationFrame","update","aspect","_this8"],"mappings":"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","file":"main.34bec46d2c85f0cf5801.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 27);\n","module.exports = __webpack_public_path__ + \"ibiEnvMap.01c04b117079eaf7beb0.png\";","module.exports = __webpack_public_path__ + \"9.9145ae407b5f4ebed61b.png\";","module.exports = __webpack_public_path__ + \"Door_03_AO.9f34ba8beaa6d4ec296c.png\";","module.exports = __webpack_public_path__ + \"Doors_02_AO.89a6beb5873cd246e001.png\";","module.exports = __webpack_public_path__ + \"Doors_01_AO.140f34b1faa0c14dd0ae.png\";","module.exports = __webpack_public_path__ + \"DoorsTop_02_AO.626278781c5b0bd875b1.png\";","module.exports = __webpack_public_path__ + \"Susp_front_AO.943835abf93789cac397.png\";","module.exports = __webpack_public_path__ + \"Susp_back_AO.e22c912ce5330bd770cf.png\";","module.exports = __webpack_public_path__ + \"Seat_AO.808f1b3f40d0bb24a1b3.png\";","module.exports = __webpack_public_path__ + \"Roof_AO.eb0ee90a1dc05c9cd1cb.png\";","module.exports = __webpack_public_path__ + \"Rim_AO.42e3fa878e48f93ca5f7.png\";","module.exports = __webpack_public_path__ + \"Dash_AO.c5d4be8d271e84994c04.png\";","module.exports = __webpack_public_path__ + \"Chassis_Back_AO.1dc3597283f99aec6baa.png\";","module.exports = __webpack_public_path__ + \"ChassieFront_AO.6334e2761431de1aad6d.png\";","module.exports = __webpack_public_path__ + \"Cab_Low_AO.e4be0a673cd4ac170c7d.png\";","module.exports = __webpack_public_path__ + \"Cab_Back_AO.5aaa448fd0df954b951a.png\";","module.exports = __webpack_public_path__ + \"front_ao.cd990c229018052baed9.png\";","module.exports = __webpack_public_path__ + \"Back_AO.03416813949cd0c3aced.png\";","module.exports = __webpack_public_path__ + \"Tire_AO.2512c4679af20fd65739.png\";","module.exports = __webpack_public_path__ + \"Accessories_AO.8484a644998fb06a5f34.png\";","module.exports = __webpack_public_path__ + \"GolfCart5.849ff7d60dc0edfe009f.fbx\";","\r\nexport default class EnvironmentLoader {\r\n    constructor() {}\r\n    generateEnv( panoramTexture ) {\r\n        const group = new THREE.Group();\r\n        this.shader = new THREE.ShaderMaterial({\r\n            uniforms: {\r\n                map: {\r\n                    type: 't', value: null\r\n                },\r\n                placement: {\r\n                    type: 'v3', value: new THREE.Vector3\r\n                },\r\n                rotation: {\r\n                    type: 'v3', value: new THREE.Vector3\r\n                }\r\n            },\r\n            vertexShader: '\\\r\n                            varying vec3 worldPosition;\\n\\\r\n                            varying vec2 vUv;\\n\\\r\n                            void main () {\\n\\\r\n                                vec4 p = vec4 (position, 1.0);\\n\\\r\n                                worldPosition = (modelMatrix * p).xyz;\\n\\\r\n                                gl_Position = projectionMatrix * modelViewMatrix * p;\\n\\\r\n                            }',\r\n            fragmentShader: '\\\r\n                            uniform sampler2D map;\\n\\\r\n                            uniform vec3 placement;\\n\\\r\n                            varying vec3 worldPosition;\\n\\\r\n                            varying vec2 vUv;\\n\\\r\n                            void main () {\\n\\\r\n                                vec3 R = worldPosition;\\n\\\r\n                                R.y -= placement.y;\\n\\\r\n                                float r = length (R);\\n\\\r\n                                vec2 uv = vUv;\\n\\\r\n                                float theta = acos (-R.y / r);\\n\\\r\n                                float phi = atan (R.x, -R.z);\\n\\\r\n                                float roty =  (0.75 + phi  / 6.2831853072);\\n\\\r\n                                roty = mod(roty, 1.0);\\n\\\r\n                                if(roty < .0) {\\n\\\r\n                                    roty = roty + 1.0;\\n\\\r\n                                }\\n\\\r\n                                vec4 test = texture2D(map, vec2 (\\n\\\r\n                                    roty,\\n\\\r\n                                    theta / 3.1415926536\\n\\\r\n                                ));\\n\\\r\n                                test *= vec4(1.12);\\n\\\r\n                                gl_FragColor = test;\\n\\\r\n                            }'\r\n        });\r\n\r\n        let geometry = new THREE.SphereGeometry( 12000, 64, 64 );\r\n\r\n        let texture = panoramTexture;\r\n        texture.magFilter = THREE.LinearFilter;\r\n        texture.minFilter = THREE.LinearFilter;\r\n\r\n        this.shader.uniforms.map.value = texture;\r\n        window.pl = this.shader.uniforms.placement.value = new THREE.Vector3(0, 2400, 0);\r\n\r\n        this.shader.side = THREE.DoubleSide;\r\n\r\n        let sphere = new THREE.Mesh( geometry, this.shader );\r\n        group.add( sphere );\r\n        sphere.position.set(0, 0, 0);\r\n        sphere.castShadow = false;\r\n\r\n        let floor_geom = new THREE.PlaneGeometry(30000, 30000, 1, 1);\r\n        let floor_mesh = new THREE.Mesh(floor_geom, this.shader);\r\n        floor_mesh.rotation.x = Math.PI/2;\r\n        floor_mesh.position.y = 20;\r\n        group.add(floor_mesh);\r\n        floor_mesh.position.y = -10/2; // so that the top lays at 0\r\n\r\n        // let floor_mesh1 = new THREE.Mesh(floor_geom, Materials.getMaterial('shadowMaterial'));\r\n        // floor_mesh1.rotation.x = -Math.PI/2;\r\n        // group.add(floor_mesh1);\r\n        // floor_mesh1.position.y = 10; // so that the top lays at 0\r\n        // floor_mesh1.receiveShadow = true;\r\n\r\n        return group;\r\n    }\r\n}","\r\nclass FirebaseWorker {\r\n\r\n    constructor(){\r\n        // this.config = {\r\n        //     apiKey: \"AIzaSyAGpT9yA_6ddPYie1TS7GtAq0iR-9SiojQ\",\r\n        //     authDomain: \"polaris-car.firebaseapp.com\",\r\n        //     databaseURL: \"https://polaris-car.firebaseio.com\",\r\n        //     projectId: \"polaris-car\",\r\n        //     storageBucket: \"polaris-car.appspot.com\",\r\n        //     messagingSenderId: \"710589892041\"\r\n        // };\r\n\r\n        this.config = {\r\n            apiKey: \"AIzaSyBBNdWLBe7CqLA_W3UZTzZ_uCSrQLaR8ow\",\r\n            authDomain: \"tnr-3d-viewer.firebaseapp.com\",\r\n            databaseURL: \"https://tnr-3d-viewer.firebaseio.com\",\r\n            projectId: \"tnr-3d-viewer\",\r\n            storageBucket: \"tnr-3d-viewer.appspot.com\",\r\n            messagingSenderId: \"653966245926\"\r\n        };\r\n\r\n        this.fbApp = firebase.initializeApp( this.config );\r\n\r\n        // firebase.auth().signInWithEmailAndPassword('kristofer.swarovski@gmail.com', '1212wwqq').catch(function(error) {\r\n        //     // Handle Errors here.\r\n        //     console.log('dsfsdf', error);\r\n        //     // var errorCode = error.code;\r\n        //     // var errorMessage = error.message;\r\n        //     // ...\r\n        // });\r\n\r\n        this.fbStorage = this.fbApp.storage();\r\n        this.fbStorageRef = this.fbStorage.ref();\r\n        this.fbStore = this.fbApp.firestore();\r\n        this.fbStore.settings({ timestampsInSnapshots: true });\r\n    }\r\n\r\n    sendData( userData, callback ){\r\n        // allow read, write: if request.auth != null;\r\n\r\n        let numbSavedImages = 0;\r\n\r\n        userData.imageList.forEach( imageData => {\r\n            const fileName =  userData.firstName + '_' + userData.lastName + '_' + imageData.name + '_' + parseInt( Math.random()*1000000 ) + '.jpg';\r\n            const spaceRef = this.fbStorageRef.child( fileName );\r\n\r\n            spaceRef.putString( imageData.imgBase64, 'data_url')\r\n                .then( snapshot => {\r\n                    console.log('Uploaded a base64 image!', snapshot);\r\n\r\n                    return this.fbStorageRef.child( fileName ).getDownloadURL();\r\n                })\r\n                .then( imageUrl => {\r\n                    imageData.imageUrl = imageUrl;\r\n\r\n                    numbSavedImages++;\r\n\r\n                    if( numbSavedImages === userData.imageList.length ) {\r\n                        const userBaseData = {\r\n                            firstName   : userData.firstName,\r\n                            lastName    : userData.lastName,\r\n                            company     : userData.company,\r\n                            jobTitle    : userData.jobTitle,\r\n                            email       : userData.email,\r\n                            phone       : userData.phone,\r\n                            stateRegion : userData.stateRegion,\r\n                            city        : userData.city,\r\n                            // fillMode    : userData.fillMode\r\n                        };\r\n\r\n                        userData.imageList.forEach( imageData => {\r\n                            userBaseData[ imageData.name ] = imageData.imageUrl;\r\n                            userBaseData[ \"FillMode_\" + imageData.name ] = imageData.fillMode;\r\n                        });\r\n\r\n                        this.saveToBase( userBaseData )\r\n                            .then(function(docRef) {\r\n                                console.log(\"Document written with ID: \", docRef.id);\r\n\r\n                                userData.orderId = docRef.id;\r\n\r\n                                callback( userData );\r\n                            })\r\n                            .catch(function(error) {\r\n                                console.error(\"Error adding document: \", error);\r\n                            });\r\n                    }\r\n                })\r\n        });\r\n    }\r\n\r\n    saveToBase( userBaseData ) {\r\n        const orderCollectionRef = this.fbStore.collection('orders');\r\n        return orderCollectionRef.add( userBaseData );\r\n    }\r\n}\r\n\r\nexport default FirebaseWorker;","/* SmtpJS.com - v2.0.1 */\r\nexport const Email = { send: function (e, o, t, n, a, s, r, c) { var d = Math.floor(1e6 * Math.random() + 1), i = \"From=\" + e; i += \"&to=\" + o, i += \"&Subject=\" + encodeURIComponent(t), i += \"&Body=\" + encodeURIComponent(n), void 0 == a.token ? (i += \"&Host=\" + a, i += \"&Username=\" + s, i += \"&Password=\" + r, i += \"&Action=Send\") : (i += \"&SecureToken=\" + a.token, i += \"&Action=SendFromStored\", c = a.callback), i += \"&cachebuster=\" + d, Email.ajaxPost(\"https://smtpjs.com/v2/smtp.aspx?\", i, c) }, sendWithAttachment: function (e, o, t, n, a, s, r, c, d) { var i = Math.floor(1e6 * Math.random() + 1), m = \"From=\" + e; m += \"&to=\" + o, m += \"&Subject=\" + encodeURIComponent(t), m += \"&Body=\" + encodeURIComponent(n), m += \"&Attachment=\" + encodeURIComponent(c), void 0 == a.token ? (m += \"&Host=\" + a, m += \"&Username=\" + s, m += \"&Password=\" + r, m += \"&Action=Send\") : (m += \"&SecureToken=\" + a.token, m += \"&Action=SendFromStored\"), m += \"&cachebuster=\" + i, Email.ajaxPost(\"https://smtpjs.com/v2/smtp.aspx?\", m, d) }, ajaxPost: function (e, o, t) { var n = Email.createCORSRequest(\"POST\", e); n.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\"), n.onload = function () { var e = n.responseText; void 0 != t && t(e) }, n.send(o) }, ajax: function (e, o) { var t = Email.createCORSRequest(\"GET\", e); t.onload = function () { var e = t.responseText; void 0 != o && o(e) }, t.send() }, createCORSRequest: function (e, o) { var t = new XMLHttpRequest; return \"withCredentials\" in t ? t.open(e, o, !0) : \"undefined\" != typeof XDomainRequest ? (t = new XDomainRequest).open(e, o) : t = null, t } };","import { Email } from '../../assets/js/smtp';\r\n\r\n\r\nexport function sendEmail( emailData ) {\r\n\r\n    const url = 'email.php';\r\n    const formData = new FormData();\r\n\r\n    formData.append('orderId',     emailData.orderId);\r\n    formData.append('firstName',   emailData.firstName);\r\n    formData.append('lastName',    emailData.lastName);\r\n    formData.append('company',     emailData.company);\r\n    formData.append('jobTitle',    emailData.jobTitle);\r\n    formData.append('email',       emailData.email);\r\n    formData.append('phone',       emailData.phone);\r\n    formData.append('stateRegion', emailData.stateRegion);\r\n    formData.append('city',        emailData.city);\r\n    formData.append('fileImage',   new File([emailData.image], `${emailData.orderId}.png`, new Date()) );\r\n\r\n    fetch(url, { method: 'POST', mode: 'cors', body: formData })\r\n        .then(function (response) {\r\n            return response.text();\r\n        })\r\n        .then(function (body) {\r\n            console.log(body);\r\n        });\r\n}\r\n","import { sendEmail } from '../app/Sender';\nimport FirebaseWorker from '../app/FirebaseWorker';\nimport EnvironmentLoader from './EnvironmentLoader';\n\nimport car from '../../assets/model/GolfCart5.fbx';\n// import Back_AO from '../../assets/model/AO_maps/Back_AO.png';\nimport Accessories_AO from '../../assets/model/AO_maps/Accessories_AO.png';\nimport Tire_AO from '../../assets/model/AO_maps/Tire_AO.png';\nimport Back_AO from '../../assets/model/AO_maps/Back_AO.png';\nimport front_ao from '../../assets/model/AO_maps/front_ao.png';\nimport Cab_Back_AO from '../../assets/model/AO_maps/Cab_Back_AO.png';\nimport Cab_Low_AO from '../../assets/model/AO_maps/Cab_Low_AO.png';\nimport ChassieFront_AO from '../../assets/model/AO_maps/ChassieFront_AO.png';\nimport Chassis_Back_AO from '../../assets/model/AO_maps/Chassis_Back_AO.png';\nimport Dash_AO from '../../assets/model/AO_maps/Dash_AO.png';\nimport Rim_AO from '../../assets/model/AO_maps/Rim_AO.png';\nimport Roof_AO from '../../assets/model/AO_maps/Roof_AO.png';\nimport Seat_AO from '../../assets/model/AO_maps/Seat_AO.png';\nimport Susp_back_AO from '../../assets/model/AO_maps/Susp_back_AO.png';\nimport Susp_front_AO from '../../assets/model/AO_maps/Susp_front_AO.png';\nimport DoorsTop_02_AO from '../../assets/model/AO_maps/DoorsTop_02_AO.png';\nimport Doors_01_AO from '../../assets/model/AO_maps/Doors_01_AO.png';\nimport Doors_02_AO from '../../assets/model/AO_maps/Doors_02_AO.png';\nimport Door_03_AO from '../../assets/model/AO_maps/Door_03_AO.png';\n\nimport IMG_Environment from '../../assets/img/9.png';\n\nimport envMapImg from '../../assets/img/ibiEnvMap.png';\n\n\nexport default class Viewer{\n\tconstructor(){\n\t\tthis.init();\n\t}\n\n\tinit(){\n\t\t// CONTAINER\n\t\tthis.container = document.getElementById('threeJS');\n\n\t\t// CAMERA\n\t\tthis.camera = new THREE.PerspectiveCamera( 45, (window.innerWidth*0.7) / (window.innerHeight*0.6), 10, 20000 );\n\t\tthis.camera.name = \"PerspectiveCamera\";\n\n\t\t// SCENE\n\t\twindow.scene = this.scene = new THREE.Scene();\n\t\twindow.v = this;\n        this.scene.add(this.camera);\n\n        // RENDERER\n\t\tthis.renderer = new THREE.WebGLRenderer({ antialias: true, preserveDrawingBuffer: true });\n\t\t// this.renderer.setPixelRatio( window.devicePixelRatio );\n        this.renderer.setSize( window.innerWidth*0.7, window.innerHeight*0.55 );\n\t\tthis.renderer.setClearColor(0xf1f1f1);\n\t\t// this.renderer.setClearColor(0x330000);\n\n        this.raycaster = new THREE.Raycaster();\n\n\t\t// LIGHT\n\t\t// this.initLight();\n\n\t\t// CONTROLS\n\t\tthis.initControls();\n\n\t\t//INIT SCENE OBJECTS\n\t\tthis.initObjects();\n\n\t\t// ADD ON SCENE\n\t\tthis.container.appendChild( this.renderer.domElement );\n\n\t\tthis.firebaseWorker = new FirebaseWorker();\n\t\t// this.firebaseWorker.sendData();\n\n\t\tthis.animate();\n\n\t\tthis.dropNumber = 1;\n\n\t\tthis.userForm = document.getElementById(\"user-from\");\n\t\tthis.imgInput = document.getElementById(\"img-input\");\n\t\tthis.labelBtns = document.getElementById(\"label-btns\");\n\t\tthis.wrapFitFillToggle = document.getElementById(\"tg-list-item\");\n        this.mouse = new THREE.Vector2();\n        this.position = new THREE.Vector3();\n        this.size = new THREE.Vector3( 15, 15, 15 );\n        this.params = {\n            scale: 15,\n            rotate: true,\n        };\n\n        this.mouseHelper = new THREE.Mesh( new THREE.BoxBufferGeometry( 1, 1, 1 ), new THREE.MeshNormalMaterial() );\n        this.mouseHelper.visible = false;\n        this.scene.add( this.mouseHelper );\n\n        this.labelGroup = new THREE.Group();\n        this.labelGroup.name = \"LabelGroup\";\n        this.scene.add(this.labelGroup);\n\n        // INIT EVENTS\n        this.initEvents();\n\t}\n\n\tinitEvents(){\n\n        window.addEventListener('resize', this.onWindowResize.bind(this));\n        document.addEventListener('mousedown', () => this.isMouseDown = true);\n        document.addEventListener('mouseup', (event) => this.onMouseup(event));\n        document.addEventListener('mousemove', (event) => this.onMouseMove(event));\n        document.addEventListener('dragover', (event) => this.onMoveImg(event));\n        document.addEventListener('dragenter', (event) => this.onMoveImg(event));\n        document.addEventListener('drop', (event) => this.onDropImg(event));\n\n        this.imgInput.addEventListener('change', (event) => this.onDropImg(event));\n\n        document.getElementById(\"btn-show-modal\").addEventListener( 'click', () => this.onDownloadClick() );\n        document.getElementById(\"wrap-modal\").addEventListener( 'click', (event) => {\n            if( event.target.id === \"wrap-modal\" ) {\n                document.getElementById(\"wrap-modal\").classList.remove(\"show\");\n            }\n        });\n        document.getElementById(\"close\").addEventListener( 'click', (event) => {\n            document.getElementById(\"wrap-modal\").classList.remove(\"show\");\n        });\n\n        document.getElementById(\"reset\").addEventListener( 'click', (event) => {\n            document.getElementById(\"img-form\").reset();\n            this.deleteLabelImage( true );\n        });\n\n        this.userForm.addEventListener( 'submit', (event) => this.sendData(event) );\n\n        document.getElementById(\"upload-img\").addEventListener( 'click', () => this.imgInput.click() );\n        document.getElementById(\"label-edit\").addEventListener( 'click', () => this.onEditClick() );\n        document.getElementById(\"label-del\").addEventListener( 'click', () => this.deleteLabelImage() );\n        document.getElementById('label-toggle').addEventListener( 'change', (event) => this.onRangeInput(event, true) );\n        document.getElementById('fill-mode').addEventListener( 'change', (event) => this.onRangeInput(event) );\n\n        document.getElementById('thankyou').addEventListener( 'click', () => {\n            document.getElementById(\"wrap-modal\").classList.remove(\"show\");\n        });\n\t}\n\n    sendData(event) {\n\t    event.preventDefault();\n\n        this.userForm.style.display = 'none';\n        document.getElementById('after-email').style.display = 'block';\n        document.getElementById('text-email').innerText = event.target['email'].value;\n\n        const userData = {\n            firstName: event.target['first-name'].value,\n            lastName: event.target['last-name'].value,\n            company: event.target['company'].value,\n            jobTitle: event.target['job-title'].value,\n            email: event.target['email'].value,\n            phone: event.target['phone'].value,\n            stateRegion: event.target['state'].value,\n            city: event.target['city'].value,\n            imageList: []\n        };\n\n        this.surfaseList.forEach( label => {\n            if( label.name === \"cloneRoofAd\" || !label.userData.isMarked ) return;\n\n            userData.imageList.push({\n                name: label.name,\n                imgBase64: label.material.map.image.toDataURL('image/jpeg', 1.0),\n                fillMode: label.userData.repeatData.mode\n            });\n        });\n\n        const canvasTemp = document.createElement(\"canvas\");\n        canvasTemp.width = this.renderer.domElement.width;\n        canvasTemp.height = this.renderer.domElement.height;\n        const ctxTemp = canvasTemp.getContext(\"2d\");\n        ctxTemp.drawImage( this.renderer.domElement, 0, 0 );\n\n        const watermarkImg = document.querySelector(\"#stng-item img\");\n        ctxTemp.drawImage( watermarkImg, canvasTemp.width/2 - watermarkImg.width/2, canvasTemp.height/2 - watermarkImg.height/2 );\n\n        canvasTemp.toBlob((blob)=>{\n            userData.image = blob;\n            this.firebaseWorker.sendData( userData, sendEmail );\n        }, 'image/png', 1);\n    }\n\n\tonDownloadClick() {\n        this.userForm.reset();\n        this.userForm.style.display = 'block';\n        document.getElementById('after-email').style.display = 'none';\n        document.getElementById(\"wrap-modal\").classList.add(\"show\");\n    }\n\n    onEditClick() {\n\t    this.labelBtns.classList.remove( \"show\" );\n        this.preActiveLabel = this.activeLabel = this.activeLabelMove;\n\t    this.imgInput.click();\n    }\n\n\tdeleteLabelImage( isRemoveAll ) {\n\n\t    if( isRemoveAll ) {\n\t        this.surfaseList.forEach( label => {\n                this.activeLabel = label;\n                this.activeLabel.userData.isMarked = false;\n                this.activeLabel.material.map = this.activeLabel.userData.mapEmpty;\n                this.activeLabel.material.map.image = this.activeLabel.userData.mapEmpty.image;\n                this.activeLabel.material.map.needsUpdate = true;\n                this.activeLabel.material.needsUpdate = true;\n\n                if(this.activeLabel.userData.cloneLabel){\n                    this.activeLabel.userData.cloneLabel.isMarked = false;\n                    this.activeLabel.userData.cloneLabel.material.map = this.activeLabel.userData.mapEmpty;\n                    this.activeLabel.userData.cloneLabel.material.map.needsUpdate = true;\n                    this.activeLabel.userData.cloneLabel.material.needsUpdate = true;\n                }\n            });\n        }\n        else {\n            this.activeLabel = this.activeLabelMove;\n            this.activeLabel.userData.isMarked = false;\n            this.activeLabel.material.map = this.activeLabel.userData.mapEmpty;\n            this.activeLabel.material.map.image = this.activeLabel.userData.mapEmpty.image;\n            this.activeLabel.material.map.needsUpdate = true;\n            this.activeLabel.material.needsUpdate = true;\n\n            if(this.activeLabel.userData.cloneLabel){\n                this.activeLabel.userData.cloneLabel.isMarked = false;\n                this.activeLabel.userData.cloneLabel.material.map = this.activeLabel.userData.mapEmpty;\n                this.activeLabel.userData.cloneLabel.material.map.needsUpdate = true;\n                this.activeLabel.userData.cloneLabel.material.needsUpdate = true;\n            }\n        }\n\n        this.labelBtns.classList.remove( \"show\" );\n\n        if( this.surfaseList.filter( label => label.userData.isMarked ).length === 0 ) {\n            this.dropNumber = 1;\n            this.activeLabel = null;\n            this.showSection( 1 );\n        }\n    }\n\n\tonRangeInput(event, isCurrLabel){\n\n        if( isCurrLabel ) {\n            this.activeLabelMove.userData.repeatData.mode = event.target.checked ? 'fill' : 'fit';\n            this.computeTextureRepeat( this.activeLabelMove );\n        }\n        else {\n            this.surfaseList.forEach( label => {\n                if( label.userData.isMarked ) {\n                    label.userData.repeatData.mode = event.target.checked ? 'fill' : 'fit';\n                    this.computeTextureRepeat(label);\n                }\n            });\n        }\n    }\n\n\tonMoveImg(event){\n        event.preventDefault();\n        event.stopPropagation();\n\t}\n\n\tonDropImg(event){\n        event.preventDefault();\n        event.stopPropagation();\n\n        this.showSection( 2 );\n\n        const imgFiles = [ ...(event.type === 'drop') ? event.dataTransfer.files : event.target.files ];\n        const readers = [];\n        const imgLoadList = [];\n        let readerLoadCounter = 0;\n        let imgLoadCounter = 0;\n\n        imgFiles.forEach(( file, fileKey ) => {\n            readers.push( new FileReader() );\n            readers[fileKey].readAsDataURL( new Blob([ file ], {type: \"octet/stream\"}) );\n\n            readers[fileKey].onload = ( e ) => {\n                imgLoadList.push( new Image() );\n                imgLoadList[ readerLoadCounter ].src = e.target.result;\n\n                imgLoadList[readerLoadCounter].onload = () => {\n                    imgLoadCounter++;\n\n                    if( imgLoadCounter === imgFiles.length ) {\n                        let numbApplyingImg = 0;\n\n                        let targetMesh = this.onMouseup(event);\n\n                        if( event.type === \"drop\" ) {\n                            targetMesh = null;\n\n                            this.surfaseList.forEach( (label, labelKey) => {\n                                if( label.name === \"cloneRoofAd\" || (labelKey + 1) % this.dropNumber ) return;\n\n                                label.userData.imgSrc = readers[ numbApplyingImg ].result;\n                                label.userData.repeatData.mode = 'fit';\n                                document.getElementById('fill-mode').checked = false;\n\n                                this.shoot(label);\n                                this.setLabelTexture( label, imgLoadList[numbApplyingImg] );\n\n                                numbApplyingImg++;\n                                if( numbApplyingImg === imgFiles.length ) numbApplyingImg = 0;\n                            });\n                        }\n                        else if( !targetMesh ) this.dropNumber = 1;\n\n\n                        if( targetMesh ) {\n                            this.activeLabel.userData.imgSrc = readers[ numbApplyingImg ].result;\n                            if( this.activeLabel.userData.cloneLabel ) this.activeLabel.userData.cloneLabel.userData.imgSrc = readers[ numbApplyingImg ].result;\n                            this.setLabelTexture( targetMesh, imgLoadList[numbApplyingImg] );\n                        }\n                        else if( event.type !== \"drop\" ) {\n\n                            this.dropNumber = 2;\n\n                            this.wrapFitFillToggle.classList.remove( \"disabled\" );\n\n                            this.surfaseList.forEach( label => {\n                                label.userData.imgSrc = readers[ numbApplyingImg ].result;\n                                label.userData.repeatData.mode = 'fit';\n                                document.getElementById('fill-mode').checked = false;\n\n                                this.shoot(label);\n                                this.setLabelTexture( label, imgLoadList[numbApplyingImg] );\n                            });\n                        }\n\n                        if( event.type === \"drop\" ) {\n                            this.dropNumber++;\n\n                            if( this.dropNumber > this.surfaseList.length-1 ) this.dropNumber = 1;\n                        }\n\n                        this.showSection( 2 );\n                        document.getElementById(\"img-form\").reset();\n\n                        this.wrapFitFillToggle.classList.remove( \"disabled\" );\n                    }\n                };\n\n                readerLoadCounter++;\n            };\n        });\n\t}\n\n    showSection( sectionNumb ) {\n        if( sectionNumb === 1 ) {\n            document.getElementById(\"step-1\").style.display = 'block';\n            document.getElementById(\"step-2\").style.display = 'none';\n        }\n        else {\n            document.getElementById(\"step-1\").style.display = 'none';\n            document.getElementById(\"step-2\").style.display = 'block';\n        }\n    }\n\n\tsetLabelTexture( label, image ){\n        label.userData.isMarked = true;\n\n        const canvas = document.createElement('canvas');\n        canvas.width = image.width;\n        canvas.height = image.height;\n        const ctx = canvas.getContext('2d');\n        const offset = 2;\n        ctx.drawImage(image, 0, 0, image.width, image.height);\n        ctx.beginPath();\n        ctx.clearRect(0,0,canvas.width,offset);\n        ctx.clearRect(canvas.width-offset,0,canvas.width,canvas.height);\n        ctx.clearRect(0,canvas.height-offset,canvas.width,canvas.height);\n        ctx.clearRect(0,0,offset,canvas.height);\n        ctx.fill();\n        ctx.stroke();\n\n        const texture = new THREE.Texture();\n        texture.image = canvas;\n        texture.minFilter = THREE.LinearFilter;\n        texture.magFilter = THREE.LinearFilter;\n\n        label.material.map = texture;\n        label.material.map.wrapS = THREE.ClampToEdgeWrapping;\n        label.material.map.wrapT = THREE.ClampToEdgeWrapping;\n\n        this.computeTextureRepeat( label );\n    }\n\n    computeTextureRepeat( label ) {\n\t    const image = label.material.map.image;\n        const imgRatio = image.width / image.height;\n        const repeatCoef = label.userData.repeatData.ratio;\n        label.material.map.repeat = new THREE.Vector2(1, 1);\n        label.material.map.offset = new THREE.Vector2();\n\n        if( label.userData.repeatData.mode == \"fill\" ) {\n            if( repeatCoef > imgRatio ) {\n                label.material.map.repeat.y = imgRatio / repeatCoef;\n                label.material.map.offset.y = -(label.material.map.repeat.y - 1) / 2;\n            }\n            else {\n                label.material.map.repeat.x = repeatCoef / imgRatio;\n                label.material.map.offset.x = -(label.material.map.repeat.x - 1) / 2;\n            }\n        }\n        else {\n            if( repeatCoef > imgRatio ) {\n                label.material.map.repeat.x = repeatCoef / imgRatio;\n                label.material.map.offset.x = -label.material.map.repeat.x / 2 + 0.5;\n            }\n            else {\n                label.material.map.repeat.y = imgRatio / repeatCoef;\n                label.material.map.offset.y = -label.material.map.repeat.y / 2 + 0.5;\n            }\n        }\n\n        if( label.userData.cloneLabel ) {\n            label.userData.cloneLabel.material.map = label.material.map.clone();\n            label.userData.cloneLabel.material.map.offset = label.material.map.offset.clone();\n\n            label.userData.cloneLabel.material.map.needsUpdate = true;\n            label.userData.cloneLabel.material.needsUpdate = true;\n        }\n\n        label.material.map.needsUpdate = true;\n        label.material.needsUpdate = true;\n    }\n\n\tinitObjects(){\n        const environment = new EnvironmentLoader().generateEnv( new THREE.TextureLoader().load( IMG_Environment ) );\n        environment.name = \"EnvironmentLoader\";\n        this.scene.add( environment );\n\n        this.loadModel();\n\t}\n\n    onMouseup(event){\n        this.isMouseDown = false;\n        if( this.preActiveLabel && event.type !== 'change' )  this.preActiveLabel = null;\n        if( this.orbCntrlsChanged ) { this.orbCntrlsChanged = false; return; }\n\n        if(event.target !== this.renderer.domElement && event.type !== 'change') return;\n\n        this.mouse.x = (event.layerX / this.renderer.domElement.offsetWidth) * 2 - 1;\n        this.mouse.y = -(event.layerY / this.renderer.domElement.offsetHeight) * 2 + 1;\n\n        this.raycaster.setFromCamera(this.mouse, this.camera);\n        const intersectsLabel = this.raycaster.intersectObjects(this.surfaseList);\n\n        if( !intersectsLabel[0] && ( event.type !== 'change' || (event.type === 'change' && !this.preActiveLabel) ) ) return;\n\n        let intersectedLabelObject = intersectsLabel[0] && intersectsLabel[0].object;\n        if( event.type === \"change\" ) intersectedLabelObject = this.preActiveLabel;\n        this.preActiveLabel = null;\n\n        if(event.type !== \"mouseup\"){\n\n            if(intersectedLabelObject.name.includes('Ad') && !intersectedLabelObject.name.includes('RoofAd_Frame1')){\n                window.al = this.activeLabel = intersectedLabelObject;\n                this.shoot( this.activeLabel );\n\n                this.wrapFitFillToggle.classList.remove( \"disabled\" );\n                document.getElementById('fill-mode').checked = this.activeLabel.userData.repeatData.mode == 'fill';\n\n                return this.activeLabel;\n            }\n        }\n        else {\n            if( !intersectedLabelObject.userData.isMarked ) {\n                this.preActiveLabel = intersectsLabel[0].object;\n                this.imgInput.click();\n\n                return;\n            }\n            if( !this.activeLabel || intersectedLabelObject.uuid === this.activeLabel.uuid ) return;\n            window.al = this.activeLabel = intersectedLabelObject;\n\n            this.wrapFitFillToggle.classList.remove( \"disabled\" );\n            document.getElementById('fill-mode').checked = this.activeLabel.userData.repeatData.mode == 'fill';\n        }\n\t}\n\n    onMouseMove(event) {\n        if( event.target !== this.renderer.domElement || this.orbCntrlsChanged ) return;\n\n        this.mouse.x = (event.layerX / this.renderer.domElement.offsetWidth) * 2 - 1;\n        this.mouse.y = -(event.layerY / this.renderer.domElement.offsetHeight) * 2 + 1;\n\n        this.raycaster.setFromCamera(this.mouse, this.camera);\n        const intersectsLabel = this.raycaster.intersectObjects(this.surfaseList);\n\n        if( intersectsLabel[0] ) {\n            this.activeLabelMove = intersectsLabel[0].object;\n\n            if( !intersectsLabel[0].object.userData.isMarked ) {\n                document.body.classList.add( 'cursor-pointer' );\n                this.labelBtns.classList.remove( \"show\" );\n            }\n            else {\n\n                if(!this.activeLabelMove.geometry.boundingSphere) this.activeLabelMove.geometry.computeBoundingSphere();\n                const center = this.activeLabelMove.geometry.boundingSphere.center.clone();\n                this.activeLabelMove.localToWorld(center);\n                center.project(this.camera);\n                // map to 2D screen space\n                center.x = Math.round( (   center.x + 1 ) * this.renderer.domElement.width  / 2 );\n                center.y = Math.round( ( - center.y + 1 ) * this.renderer.domElement.height / 2 );\n                center.z = 0;\n                this.labelBtns.classList.add( \"show\" );\n                const pos = {\n                    x: center.x + this.renderer.domElement.offsetLeft - this.labelBtns.offsetWidth/2,\n                    y: center.y + this.renderer.domElement.offsetTop - this.labelBtns.offsetHeight/2,\n                };\n                this.labelBtns.style.transform = `translate(${ pos.x }px, ${ pos.y }px)`;\n                document.getElementById(\"label-toggle\").checked = this.activeLabelMove.userData.repeatData.mode == 'fill';\n            }\n        }\n        else {\n            document.body.classList.remove( 'cursor-pointer' );\n            this.labelBtns.classList.remove( \"show\" );\n        }\n    }\n\n\tloadModel(){\n\n        new THREE.FBXLoader().load(car, (model) => {\n        \tthis.model = model;\n\n        \tthis.initLight();\n\n        \tthis.model.name = 'WrapModel';\n            this.surfaseList = [];\n\n            this.model.traverse(el => {\n                if(el.name === \"RoofAd\") el.material.color.setRGB(0.78, 0.78, 0.78);\n                if(el.name === \"Seats\") { el.material.shininess = 2; el.material.color.setRGB(0.2, 0.2, 0.2); el.material.specular.setRGB(0.5, 0.5, 0.5); }\n                if(el.name === \"DriverControl1\") { el.material[0].shininess = el.material[1].shininess = 2; }\n                if(el.name === \"Dashboard\") { el.material.shininess = 2; el.material.color.setRGB(0.13, 0.13, 0.13); el.material.specular.setRGB(0.6, 0.6, 0.6); }\n                if(el.name === \"Cab_Low\") { el.material.shininess = 2; }\n                if(el.name === \"Cab_Back\") { el.material.shininess = 2; }\n                if(el.name === \"RoofHatch\") { el.material.shininess = 2; el.material.color.setRGB(0.1, 0.1, 0.1); }\n                if(el.name === \"Rims\") { el.material.shininess = 2; el.material.color.setRGB(0.06, 0.06, 0.06); el.material.aoMap = new THREE.TextureLoader().load( Rim_AO ); }\n                if(el.name === \"Tires\") { el.material.normalScale.set(100, 100); el.material.color.setRGB(0.14, 0.14, 0.14); el.material.aoMap = new THREE.TextureLoader().load( Tire_AO ); }\n                if(el.name === \"Floor\") { el.material.shininess = 2; el.material.color.setRGB(0.17, 0.17, 0.17); }\n                if(el.name === \"Doors1\") { el.material[1].shininess = 2; el.material[1].color.setRGB(0.17, 0.17, 0.17); }\n                if(el.name === \"Front_Black\") { el.material[0].shininess = 2; el.material[0].color.setRGB(0.17, 0.17, 0.17); }\n                if(el.name === \"FrontAccessories\") { el.material.shininess = 2; el.material.color.setRGB(0.17, 0.17, 0.17); }\n                if(el.name === \"DoorHandles1\") { el.material[0].shininess = 2; el.material[0].color.setRGB(0.17, 0.17, 0.17); }\n                if(el.name === \"Doors_Support\") { el.material[0].shininess = 2; el.material[0].color.setRGB(0.17, 0.17, 0.17); }\n                if(el.name === \"Doors_01\") { el.material[0].shininess = 2; el.material[0].color.setRGB(0.17, 0.17, 0.17); }\n                if(el.name === \"DoorsTop_01\") { el.material.shininess = 2; el.material.color.setRGB(0.17, 0.17, 0.17); }\n                if(el.name === \"DoorsTop_02\") { el.material.shininess = 2; el.material.color.setRGB(0.17, 0.17, 0.17); }\n                if(el.name === \"RoofAd_Frame1\") { el.material.shininess = 2; el.material.color.setRGB(0.17, 0.17, 0.17); }\n                if(el.name === \"Seats\") el.material.aoMap = new THREE.TextureLoader().load( Seat_AO );\n                // if(el.name === \"FrontAccessories\") el.material.aoMap = new THREE.TextureLoader().load( Accessories_AO );\n                // if(el.name === \"Back2\") { el.material[0].aoMap = new THREE.TextureLoader().load( Back_AO ); el.material[0].aoMapIntensity = 0.4; }\n                // if(el.name === \"FrontBumper\") el.material.aoMap = new THREE.TextureLoader().load( front_ao );\n                // if(el.name === \"Cab_Back\") el.material.aoMap = new THREE.TextureLoader().load( Cab_Back_AO );\n                // if(el.name === \"Cab_Low\") el.material.aoMap = new THREE.TextureLoader().load( Cab_Low_AO );\n                // if(el.name === \"ChassieFront1\") el.material.aoMap = new THREE.TextureLoader().load( ChassieFront_AO );\n                // if(el.name === \"ChassisBack2\") el.material.aoMap = new THREE.TextureLoader().load( Chassis_Back_AO );\n                // if(el.name === \"Dashboard\") el.material.aoMap = new THREE.TextureLoader().load( Dash_AO );\n                // if(el.name === \"Roof\") el.material.aoMap = new THREE.TextureLoader().load( Roof_AO );\n                // if(el.name === \"Seats\") el.material.aoMap = new THREE.TextureLoader().load( Seat_AO );\n                // if(el.name === \"Susp_Back1\") el.material.aoMap = new THREE.TextureLoader().load( Susp_back_AO );\n                // if(el.name === \"Susp_Front1\") el.material.aoMap = new THREE.TextureLoader().load( Susp_front_AO );\n                // if(el.name === \"DoorsTop_02\") el.material.aoMap = new THREE.TextureLoader().load( DoorsTop_02_AO );\n                // if(el.name === \"Doors_01\") { el.material[1].aoMap = new THREE.TextureLoader().load( Doors_01_AO ); el.material[1].aoMapIntensity = 0.5; }\n                // if(el.name === \"Doors1\") el.material[0].aoMap = el.material[1].aoMap = new THREE.TextureLoader().load( Doors_02_AO );\n                // if(el.name === \"Doors_Support\") el.material[0].aoMap = el.material[1].aoMap = el.material[2].aoMap = new THREE.TextureLoader().load( Door_03_AO );\n\n                if(el.name === \"Glass\"){\n                    el.material.color.setRGB(.7, .7, .7);\n\n                    new THREE.TextureLoader().load( IMG_Environment, ( envMapTexture ) => {\n                        envMapTexture.mapping = THREE.SphericalReflectionMapping;\n                        el.material.envMap = envMapTexture;\n                        el.material.envMap.needsUpdate = true;\n                        el.material.needsUpdate = true;\n                    });\n                }\n\n                if(el.name.includes('Ad') && !el.name.includes('RoofAd_Frame1')) {\n                    el.material.map.magFilter = THREE.NearestMipMapLinearFilter;\n                    el.material.map.minFilter = THREE.NearestMipMapLinearFilter;\n                    el.material.map.anisotropy = 8;\n                    el.userData.repeatData = { ratio: 1.4 };\n                    if(el.name === \"FrontAdd\"    ) el.userData.repeatData = { ratio: 3.0 };\n                    if(el.name === \"BackAd\"      ) el.userData.repeatData = { ratio: 2.4 };\n                    if(el.name === \"BackWindowAd\") el.userData.repeatData = { ratio: 2.0 };\n                    if(el.name.includes(\"RoofAd\")) el.userData.repeatData = { ratio: 4.2 };\n                    el.userData.repeatData.mode = 'fit';\n\n\n                    if( el.name === \"SideAdd_04\" )   { this.surfaseList[0] = el; }\n                    if( el.name === \"SideAdd_05\" )   { this.surfaseList[1] = el; }\n                    if( el.name === \"SideAdd_06\" )   { this.surfaseList[2] = el; }\n                    if( el.name === \"SideAdd_01\" )   { this.surfaseList[3] = el; }\n                    if( el.name === \"SideAdd_02\" )   { this.surfaseList[4] = el; }\n                    if( el.name === \"SideAdd_03\" )   { this.surfaseList[5] = el; }\n                    if( el.name === \"BackWindowAd\" ) { this.surfaseList[6] = el; }\n                    if( el.name === \"BackAd\" )       { this.surfaseList[7] = el; }\n                    if( el.name === \"FrontAdd\" )     { this.surfaseList[8] = el; }\n                    if( el.name === \"RoofAd\" )       { this.surfaseList[9] = el; }\n\n                    if(el.name.includes('RoofAd')) {\n                        const cloneRoofAd = new THREE.Mesh( el.geometry.clone(), el.material.clone() );\n                        const cloneRoofAdMiddle = new THREE.Mesh( el.geometry.clone(), el.material.clone() );\n                        cloneRoofAd.name = 'cloneRoofAd';\n                        cloneRoofAdMiddle.name = 'cloneRoofAdMiddle';\n                        cloneRoofAd.material.transparent = true;\n                        cloneRoofAdMiddle.material.map = null;\n                        el.userData.cloneLabel = cloneRoofAd;\n                        cloneRoofAd.userData.cloneLabel = el;\n                        cloneRoofAd.position.set( -0.5, 0, -67.5 );\n                        cloneRoofAdMiddle.position.set( -0.25, 0, -67.5 );\n                        cloneRoofAd.rotateY(Math.PI);\n                        cloneRoofAdMiddle.rotateY(Math.PI);\n                        cloneRoofAd.userData.mapEmpty = cloneRoofAd.userData.map = cloneRoofAd.material.map = el.userData.mapEmpty = el.userData.map = el.material.map.clone() ;\n                        el.material.map.onUpdate = () => {\n                            cloneRoofAd.userData.mapEmpty.image = cloneRoofAd.userData.map.image = cloneRoofAd.material.map.image = el.userData.mapEmpty.image = el.userData.map.image = el.material.map.image.cloneNode();\n                            cloneRoofAd.userData.map.needsUpdate = true;\n                        };\n                        el.userData.offset = new THREE.Vector2();\n                        el.userData.aspectRatio = 1;\n                        el.material.alphaMap = null;\n                        el.userData.color = el.material.color.clone();\n                        cloneRoofAd.userData.repeatData = { ratio: 4.2, mode: 'fit'  };\n                        cloneRoofAd.userData.offset = new THREE.Vector2();\n                        cloneRoofAd.userData.aspectRatio = 1;\n                        cloneRoofAd.material.alphaMap = null;\n                        cloneRoofAd.userData.color = cloneRoofAd.material.color.clone();\n                        this.surfaseList.push( cloneRoofAd );\n                        this.model.add( cloneRoofAd );\n                        this.model.add( cloneRoofAdMiddle );\n                    }\n                    else {\n                        el.userData.mapEmpty = el.userData.map = el.material.map.clone();\n                        el.material.map.onUpdate = () => el.userData.mapEmpty.image = el.userData.map.image = el.material.map.image.cloneNode();\n                        el.userData.offset = new THREE.Vector2();\n                        el.userData.aspectRatio = 1;\n                        el.material.alphaMap = null;\n                        el.userData.color = el.material.color.clone();\n                    }\n\n                    el.material.transparent = true;\n                }\n            });\n\n            this.model.scale.set(10, 10, 10);\n\t\t\tthis.scene.add(this.model);\n\n\t\t\tsetTimeout(()=>document.getElementById('preloader').classList.add('hide'), 3000);\n        }, (progress) => {\n            // console.log('progress', progress);\n        }, (error) => {\n            console.log('error', error);\n        });\n\t}\n\n    shoot(mesh){\n        this.activeLabel = mesh;\n\n        const cloneLabel = this.activeLabel.userData.cloneLabel;\n        if(this.activeLabel.userData.cloneLabel) {\n            cloneLabel.userData.isMarked = true;\n            cloneLabel.userData.currPosition = cloneLabel.userData.startPosition = this.position.clone();\n        }\n    }\n\n    disposeLabel(label){\n        this.labelGroup.remove( label );\n\n        const geometryDispose = label.geometry;\n\t    const mapDispose = label.material.map;\n\n        label.geometry = null;\n        label.material.map = null;\n\n        geometryDispose.dispose();\n        mapDispose.dispose();\n    }\n\n\tinitControls(){\n\t\twindow.oc = this.orbitControls = new THREE.OrbitControls( this.camera, this.renderer.domElement );\n        this.orbitControls.target.set(0, 800, 0);\n        this.orbitControls.object.position.set(3620, 1328, 2600);\n        this.orbitControls.maxPolarAngle = 1.7;\n        this.orbitControls.enablePan = false;\n        this.orbitControls.minDistance = 2600;\n        this.orbitControls.maxDistance = 5800;\n\n        this.orbitControls.addEventListener( \"change\", ( event ) => {\n            this.labelBtns && this.labelBtns.classList.remove( \"show\" );\n            if( this.isMouseDown )  this.orbCntrlsChanged = true;\n        });\n        setTimeout( () => this.orbCntrlsChanged = false, 500 );\n\t}\n\n\tinitLight(){\n\t\tlet ambientLight = new THREE.AmbientLight( 0xffffff, 1.21 );\n\t\tambientLight.name = 'AmbientLight';\n\t\tambientLight.position.set( 0, 300, 0 );\n\t\tthis.model.add( ambientLight );\n\n        const directionalLight0 = new THREE.DirectionalLight( 0xffffff, 0.02 );\n        directionalLight0.name = 'DirectionalLight0';\n        directionalLight0.position.set( 0, 170, 400 );\n        this.model.add( directionalLight0 );\n\n        const directionalLight1 = new THREE.DirectionalLight( 0xffffff, 0.04 );\n        directionalLight1.name = 'DirectionalLight1';\n        directionalLight1.position.set( 480, 170, 230 );\n        this.model.add( directionalLight1 );\n\n        const directionalLight2 = new THREE.DirectionalLight( 0xffffff, 0.04 );\n        directionalLight2.name = 'DirectionalLight2';\n        directionalLight2.position.set( -480, 170, -230 );\n        this.model.add( directionalLight2 );\n\n        const pointLight1 = new THREE.PointLight( 0xffffff, .9, 2000 );\n        pointLight1.name = 'PointLight1';\n        pointLight1.position.set( 0, 125, 115 );\n        this.model.add( pointLight1 );\n\n        const pointLight2 = new THREE.PointLight( 0xffffff, .2, 2000 );\n        pointLight2.name = 'PointLight2';\n        pointLight2.position.set( 0, 125, 0 );\n        this.model.add( pointLight2 );\n\n        const pointLight3 = new THREE.PointLight( 0xffffff, .4, 2000 );\n        pointLight3.name = 'PointLight3';\n        pointLight3.position.set( 0, 125, -115 );\n        this.model.add( pointLight3 );\n\n        // WHEEL LIGHTs\n        const pointLightFR = new THREE.PointLight( 0xffffff, 0.8, 400 );\n        pointLightFR.name = 'pointLightFR';\n        pointLightFR.position.set( -85, 30, 160 );\n        this.model.add( pointLightFR );\n\n        const pointLightFL = new THREE.PointLight( 0xffffff, 0.8, 400 );\n        pointLightFL.name = 'pointLightFL';\n        pointLightFL.position.set( 85, 30, 160 );\n        this.model.add( pointLightFL );\n\n        const pointLightBR = new THREE.PointLight( 0xffffff, 0.8, 400 );\n        pointLightBR.name = 'pointLightBR';\n        pointLightBR.position.set( -85, 30, -175 );\n        this.model.add( pointLightBR );\n\n        const pointLightBL = new THREE.PointLight( 0xffffff, 0.8, 400 );\n        pointLightBL.name = 'pointLightBL';\n        pointLightBL.position.set( 85, 30, -175 );\n        this.model.add( pointLightBL );\n\n        // this.control = new THREE.TransformControls( this.camera, this.renderer.domElement );\n        // this.control.addEventListener( 'dragging-changed', ( event ) => this.orbitControls.enabled = ! event.value );\n        // this.scene.add( this.control );\n        // this.control.attach( pointLightBL );\n\t}\n\n\tonWindowResize() {\n\t\tthis.camera.aspect = this.container.offsetWidth / this.container.offsetHeight;\n\t\tthis.camera.updateProjectionMatrix();\n\t\tthis.renderer.setSize( this.container.offsetWidth, this.container.offsetHeight );\n\t}\n\n\tanimate(){\n\t\trequestAnimationFrame(() => this.animate());\n\n\t\tthis.orbitControls.update();\n\t\tthis.renderer.render( this.scene, this.camera );\n\t}\n}","import Viewer from './viewer/viewer';\n\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n\tnew Viewer();\n});\n"],"sourceRoot":""}